# Load scripting addition (requires passwordless sudo for yabai)
yabai -m signal --add event=dock_did_restart action="sudo yabai --load-sa"
sudo yabai --load-sa

# Reapply display rules when a display is added
yabai -m signal --add event=display_added action="~/.local/bin/yabai-apply-display-rules"

yabai -m config layout stack
yabai -m config auto_balance on

yabai -m config window_origin_display focused

yabai -m config top_padding 10
yabai -m config bottom_padding 10
yabai -m config left_padding 10
yabai -m config right_padding 10
yabai -m config window_gap 10

yabai -m rule --add app="^Finder$" manage=off

yabai -m rule --add app="^System Settings$" title=".*" manage=off
yabai -m rule --add app="^System Information$" manage=off

yabai -m rule --add title='Preferences$' manage=off
yabai -m rule --add title='Settings$' manage=off
yabai -m rule --add title='General$' manage=off

yabai -m rule --add app='Raycast' title=".*" manage=off
yabai -m rule --add app='Raycast' title="^AI Chat$" manage=on
yabai -m rule --add app='BetterDisplay$' manage=off
yabai -m rule --add app='Leader Key' title=".*" manage=off
yabai -m rule --add app='DeskPad$' manage=off
yabai -m rule --add app="^Antinote$" title!="^Antinote$" manage=off
yabai -m rule --add app="superwhisper$" title=".*" manage=off
yabai -m rule --add app="CleanShot X" title=".*" manage=off
yabai -m rule --add title="^Android Emulator.*" manage=off
yabai -m rule --add app="^qemu-system-.*$" manage=off

yabai -m rule --add app="^Signal$" display=2
yabai -m rule --add app="^Messages$" display=2
yabai -m rule --add app="^Slack$" display=2

yabai -m config debug_output on
#!/bin/bash
# update-packages - Update all package managers

LOG="$HOME/.local/log/update-packages.log"
mkdir -p "$(dirname "$LOG")"

exec > >(tee -a "$LOG") 2>&1

log() { echo "[$(date '+%Y-%m-%d %H:%M:%S')] $*"; }

log "Starting package updates..."

brew update && brew upgrade --greedy && brew cleanup
log "✓ Homebrew packages updated and cleaned"

npm update -g
log "✓ npm global packages updated"

pnpm update -g
log "✓ pnpm global packages updated"

bun update --global
log "✓ bun global packages updated"

pipx upgrade-all
log "✓ pipx packages updated"

log "✓ All package updates complete"
